---
// src/pages/blog/index.astro
import Layout from '../../layouts/Layout.astro';
import Card from '../../components/ui/Card.astro';

// Datos de los artículos del blog.
// Por ahora están aquí, pero luego vendrán del backend.
const response = await fetch('http://localhost:8080/young-warriors-web/api/posts.php');
const postsData = await response.json();
---
<Layout
  title="Blog Educativo | Young Warriors Club"
  description="Artículos, consejos y noticias de Young Warriors. Aprende sobre técnica de baloncesto, formación y nutrición."
>
  <section class="page-header">
    <div class="container-narrow">
      <span>Aprendizaje y Formación</span>
      <h1>Nuestro Blog Educativo</h1>
      <p>Un espacio para jugadores, padres y aficionados. Aquí compartimos nuestro conocimiento y pasión por el baloncesto.</p>
    </div>
  </section>

  <section class="posts-list container">
    <div class="posts-grid">
      {postsData.map(post => (
        <a href={`/blog/${post.slug}`} class="post-card-link">
          <Card>
            <img src={post.image} alt={post.title} class="post-image" loading="lazy" />
            <div class="post-content">
              <span class="post-category">{post.category}</span>
              <h3 class="post-title">{post.title}</h3>
              <p class="post-description">{post.description}</p>
              <span class="read-more">Leer más →</span>
            </div>
          </Card>
        </a>
      ))}
    </div>
  </section>
</Layout>

<style>
  /* Estilos generales y de encabezado (reutilizados) */
  .container { max-width: 1200px; margin: 0 auto; padding: 4rem 1.5rem; }
  .container-narrow { max-width: 800px; margin: 0 auto; padding: 4rem 1.5rem; text-align: center; }
  .page-header { background-color: var(--color-bg-muted); }
  .page-header span { color: var(--color-primary); font-weight: 600; }
  .page-header h1 { font-size: 3rem; margin-top: 0.5rem; }
  .page-header p { margin-top: 1rem; font-size: 1.1rem; }

  /* Estilos de la lista de posts */
  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
  }
  .post-card-link {
    text-decoration: none;
    color: inherit;
    display: block;
    height: 100%;
  }
  .post-card-link :global(.card) { /* Aplica estilo al componente Card importado */
    padding: 0;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
  .post-card-link:hover :global(.card) {
    transform: translateY(-5px);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  }
  .post-image {
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-top-left-radius: 0.75rem;
    border-top-right-radius: 0.75rem;
  }
  .post-content {
    padding: 1.5rem;
  }
  .post-category {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--color-primary);
  }
  .post-title {
    margin: 0.5rem 0;
    font-size: 1.4rem;
  }
  .post-description {
    font-size: 0.9rem;
    line-height: 1.6;
  }
  .read-more {
    display: inline-block;
    margin-top: 1rem;
    font-weight: 600;
    color: var(--color-primary);
  }
</style>